\documentclass{article}
\usepackage{geometry,array,longtable,multirow,hhline,amsmath,ctexheading}
\usepackage[table]{xcolor}
\usepackage[no-math]{fontspec}
\usepackage{hyperref}

\geometry{a4paper, hmargin=0.5in, vmargin=1.0in}

\ExplSyntaxOn
\keys_set:nn { ctex }
  {
    section/format = \Large\bfseries\centering
  }
\ExplSyntaxOff

\hypersetup{bookmarksnumbered = true}

\setmainfont{Fira Code}
%\setsansfont{TeX Gyre Heros}
\setmonofont{Fira Code}

\newfontface\SYMBOLFONT{fira-math.otf}[Path=../assets/]
%\newfontface\SYMBOLFONT{FiraSans-Regular.otf}
%\newfontface\SYMBOLFONT{xits-math.otf}

\makeatletter
\ExplSyntaxOn

\definecolor { symbol@bg@color   } { named } { white     } % { HTML } { FAFAFA }
\definecolor { encoding@bg@color } { named } { lightgray } % { HTML } { BDBDBD }
\definecolor { nochar@bg@color   } { named } { red       } % { HTML } { E91E63 }
\definecolor { reversed@bg@color } { named } { blue      } % { HTML } { BDBDBD }

\file_input:n { unicode-reversed.def }

\cs_new_protected:Npn \fonttable_symbol:n #1
  { \tex_char:D \int_eval:n {#1} \scan_stop: }
\prg_new_protected_conditional:Npnn \fonttable_if_char_exist:n #1 { T, F, TF}
  {
    \etex_iffontchar:D \tex_font:D \int_eval:n {#1} \scan_stop:
      \prg_return_true:
    \else:
      \prg_return_false:
    \fi:
  }

\cs_new_protected:Npn \fonttable_glyph:n #1
  {
    %\group_begin:
    \exp_args:NNx \clist_if_in:NnTF \fonttable_unicode_reversed_clist { \int_to_Hex:n {#1} }
      { \cellcolor { reversed@bg@color } }
      {
        \SYMBOLFONT
        \fonttable_if_char_exist:nTF {#1}
          {
            \cellcolor { symbol@bg@color }
            \Large
            \fonttable_symbol:n {#1}
          }
          { \cellcolor { nochar@bg@color } }
      }
    %\group_end:
  }
\cs_new_protected:Npn \fonttable_glyph_with_alignment:n #1
  { \fonttable_glyph:n {#1} & }

\cs_new_protected:Npn \fonttable_encoding:n #1
  {
    \group_begin:
      \cellcolor { encoding@bg@color }
      \ttfamily \tiny
      \int_compare:nNnTF {#1} < { "100 }
        { 00 }
        {
          \int_compare:nNnT {#1} < { "1000 }
          { 0 }
        }
      \int_to_Hex:n {#1}
    \group_end:
  }
\cs_new_protected:Npn \fonttable_encoding_with_alignment:n #1
  { \fonttable_encoding:n {#1} & }

\box_new:N \l__fonttable_tmpa_box
\box_new:N \l__fonttable_old_arstrut_box

\cs_new:Npn \fonttable_set_arstrut:nn #1#2
  {
    \tex_noalign:D
      {
        \group_begin:
          % Store the old strutbox
          \box_gset_eq:NN \l__fonttable_old_arstrut_box \@arstrutbox
          % Change the dimensions of \@arstrutbox
          \hbox_set_to_wd:Nnn \l__fonttable_tmpa_box { \c_zero_dim } { }
          \box_set_ht:Nn \l__fonttable_tmpa_box {#1}
          \box_set_dp:Nn \l__fonttable_tmpa_box {#2}
          \hbox_gset:Nn \@arstrutbox { \box_use:N \l__fonttable_tmpa_box }
        \group_end:
      }
  }
\cs_new:Npn \fonttable_restore_arstrut:
  {
    \tex_noalign:D
      { \box_gset_eq:NN \@arstrutbox \l__fonttable_old_arstrut_box }
  }

\int_new:N \l__fonttable_tmpa_int
\cs_new:Npn \fonttable_row_nummber:n #1
  {
    \raisebox { 20pt }
      {
        \ttfamily
        \int_set:Nn \l__fonttable_tmpa_int { #1 / \c_sixteen }
        \int_compare:nNnTF { \l__fonttable_tmpa_int } < { "10 }
          { 00 }
          {
            \int_compare:nNnT { \l__fonttable_tmpa_int } < { "100 }
            { 0 }
          }
        \int_to_Hex:n { \l__fonttable_tmpa_int }
      }
  }

\group_begin:
  \char_set_catcode_active:N \~
  \cs_new:Npn \fonttable_hline:
    { \hhline { ~ | *{16}{-} } }
\group_end:

\cs_new:Npn \fonttable_row:n #1
  {
    % Symbol row
    \fonttable_hline:
    \fonttable_set_arstrut:nn { 20pt } { 10pt }
    \multirow { 2 } * { \fonttable_row_nummber:n {#1} } &
    \int_step_function:nnnN {#1} { 1 } { #1 + 14 }
      \fonttable_glyph_with_alignment:n
    \fonttable_glyph:n { #1 + 15 } \\
    \fonttable_restore_arstrut:
    % Encoding row
    \fonttable_hline:
    \fonttable_set_arstrut:nn { 5pt } { 1pt } &
    \int_step_function:nnnN {#1} { 1 } { #1 + 14 }
      \fonttable_encoding_with_alignment:n
    \fonttable_encoding:n { #1 + 15 } \\
  }

\cs_new:Npn \fonttable_multi_row:nn #1#2
  {
    \int_step_function:nnnN
      { \int_div_truncate:nn {#1} { 16 } * 16 }
      { 16 }
      { (\int_div_truncate:nn {#2} { 16 } + 1) * 16 - 1 }
      \fonttable_row:n
  }

\cs_new:Npn \fonttable_first_row_cell:n #1
  {
    \group_begin:
      \ttfamily
      \int_to_Hex:n {#1}
    \group_end:
  }
\cs_new:Npn \fonttable_first_row_cell_with_alignment:n #1
  { \fonttable_first_row_cell:n {#1} & }
\cs_new:Npn \fonttable_first_row:
  {
    \int_step_function:nnnN { 0 } { 1 } { 14 }
      \fonttable_first_row_cell_with_alignment:n
    \fonttable_first_row_cell:n { 15 }
  }

\newcolumntype {C} [1] { >{\centering\arraybackslash} m {#1} }

\NewDocumentCommand \fonttable { m m }
  {
    \begin{longtable}{ r | *{16}{ C{18pt} | } }
      &
      \multicolumn {16} { @{} c @{} | }
        {
          \begin{tabular} { * {16} { C{18pt} } }
            \fonttable_first_row:
          \end{tabular}
        }
      \\
      \fonttable_multi_row:nn {#1} {#2}
      \fonttable_hline:
    \end{longtable}
    \clearpage
  }

\ExplSyntaxOff
\makeatother

\begin{document}

\raggedbottom

\section{C0 Controls and Basic Latin}
\fonttable{"20}{"7F}

\section{C1 Controls and Latin-1 Supplement}
\fonttable{"80}{"FF}

\section{Latin Extended-A}
\fonttable{"100}{"17F}

\section{Latin Extended-B}
\fonttable{"180}{"24F}

%\section{IPA Extensions}
%\fonttable{"250}{"2AF}
%
%\section{Spacing Modifier Letters}
%\fonttable{"2B0}{"2FF}
%
\section{Combining Diacritical Marks}
\fonttable{"300}{"36F}

\section{Greek and Coptic}
\fonttable{"370}{"3FF}

\section{General Punctuation}
\fonttable{"2000}{"206F}

%\section{Superscripts and Subscripts}
%\fonttable{"2070}{"209F}
%
\section{Currency Symbols}
\fonttable{"20A0}{"20CF}

\section{Combining Diacritical Marks for Symbols}
\fonttable{"20D0}{"20FF}

\section{Letterlike Symbols}
\fonttable{"2100}{"214F}

\section{Number Forms}
\fonttable{"2150}{"218F}

\section{Arrows}
\fonttable{"2190}{"21FF}

\section{Mathematical Operators}
\fonttable{"2200}{"22FF}

\section{Miscellaneous Technical}
\fonttable{"2300}{"23FF}

%\section{Control Pictures}
%\fonttable{"2400}{"243F}
%
%\section{Optical Character Recognition}
%\fonttable{"2440}{"245F}
%
%\section{Enclosed Alphanumerics}
%\fonttable{"2460}{"24FF}
%
%\section{Box Drawing}
%\fonttable{"2500}{"257F}
%
\section{Block Elements}
\fonttable{"2580}{"259F}

\section{Geometric Shapes}
\fonttable{"25A0}{"25FF}

\section{Miscellaneous Symbols}
\fonttable{"2600}{"26FF}

%\section{Dingbats}
%\fonttable{"2700}{"27BF}
%
%\section{Miscellaneous Mathematical Symbols-A}
%\fonttable{"27C0}{"27EF}
%
%\section{Supplemental Arrows-A}
%\fonttable{"27F0}{"27FF}
%
%\section{Braille Patterns}
%\fonttable{"2800}{"28FF}
%
%\section{Supplemental Arrows-B}
%\fonttable{"2900}{"297F}
%
%\section{Miscellaneous Mathematical Symbols-B}
%\fonttable{"2980}{"29FF}
%
%\section{Supplemental Mathematical Operators}
%\fonttable{"2A00}{"2AFF}
%
%\section{Miscellaneous Symbols and Arrows}
%\fonttable{"2B00}{"2BFF}
%
\section{Alphabetic Presentation Forms}
\fonttable{"FB00}{"FB4F}

\section{Mathematical Alphanumeric Symbols}
\fonttable{"1D400}{"1D7FF}

\end{document}
